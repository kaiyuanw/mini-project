{% extends "templates/base.html" %}

{% block custom_style %} 
    <link href="../assets/css/trending_stream.css" rel="stylesheet"> 
{% endblock %} 

{% block trending_stream %}
    <li class="active"><a href="trending_stream">Trending</a></li>
{% endblock %}

{% block div_body %}
    <div class="panel panel-primary panel-custom">
        <div class="panel-heading">
            <h3 class="panel-title">Top 3 Trending Streams</h3>
        </div>
        <div class="panel-body">
            {% set count = 0 %}
            {% for stream in most_three_popular_streams %}
                <div class="col-sm-3">
                    <div {% if count == 0 %} class="panel panel-primary"
                    {% elif count == 1 %} class="panel panel-info"
                    {% else %} class="panel panel-default"
                    {% endif %}>
                        <div class="panel-heading">
                            <h3 class="panel-title">{{ stream.name }}</h3>
                        </div>
                        <div class="panel-body">
                            <a href="{% if user == stream.owner %} {{ stream.stream_url }} {% else %} {{ stream.guest_url }} {% endif %}">
                                <img alt="200x200" class="img-thumbnail" data-src="holder.js/200x200" style="width: 200px; height: 200px;" src="{{ stream.cover_url }}" data-holder-rendered="true">
                            </a>
                            <div>
                                <strong>{{ stream.total_visits|length }}</strong> views in the last hour.
                            </div>
                        </div>
                    </div>
                </div>
                {% set count = count + 1 %}
            {% endfor %}
            <div class="col-sm-3">
                <form action="update_email_freq" method="post">
                    <div>
                        <h3>
                        <span class="label label-default">Email trending report</span>
                        </h3>
                    </div>
                    <div>
                        <input type="radio" name="frequency" value="no" {% if timer.threshold == 0 %}checked="checked"{% endif %}/>No reports
                    </div>
                    <div>
                        <input type="radio" name="frequency" value="5m" {% if timer.threshold == 1 %}checked="checked"{% endif %}/>Every 5 minutes<br>
                    </div>
                    <div>
                        <input type="radio" name="frequency" value="1h" {% if timer.threshold == 12 %}checked="checked"{% endif %}/>Every 1 hour<br>
                    </div>
                    <div>
                        <input type="radio" name="frequency" value="1d" {% if timer.threshold == 288 %}checked="checked"{% endif %}/>Every day<br>
                    </div>
                    <button class="btn btn-default" type="button submit">Update rate</button>
                </form>
            </div>
        </div>
    </div>
{% endblock %}